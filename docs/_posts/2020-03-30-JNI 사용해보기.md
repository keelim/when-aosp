---
layout: post
title: "JNI ì‚¬ìš©í•´ë³´ê¸°"
date: 2020-03-30 00:00:01
author: Keelim
categories: AOSP
comments: true
toc: true
toc_sticky: true
---

## JNI ì‚¬ìš©ê¸°

ìë°” í”„ë ˆì„ì›Œí¬ë¥¼ ë³´ë©´ì„œ JNI ë¥¼ ê°œë…ì„ ì´í•´í•˜ê¸° ìœ„í•˜ì—¬
ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  , dllì„ ë¹Œë“œë¥¼ í•˜ì—¬ JNI ë¥¼ ì‹¤í–‰ì„ í•´ë³´ê¸°ë¡œ í•˜ì˜€ë‹¤.

### Jva ì½”ë“œ ì‘ì„±

JNI ë¥¼ ì‚¬ìš©ì„ í•˜ê¸° ìœ„í•˜ì—¬ ë¨¼ì € ìë°” java ì½”ë“œë¥¼ ë¨¼ì € ì‘ì„±ì„ í•˜ì˜€ë‹¤.

```java
public class JNI {
    static {
        System.loadLibrary("JNI");
    }

    private native int getNumber();

    private native void printHelloWorld();

    public static void main(String[] args) {
        JNI jni = new JNI();

        jni.printHelloWorld();
        System.out.println(jni.getNumber());
    }
}

```

### JNI í—¤ë” íŒŒì¼

JNK 8 ì´ì „ì—ëŠ” javah ë¥¼ í†µí•´ì„œ JNI.h ë¥¼ ë§Œë“¤ì—ˆì§€ë§Œ jdk ì´í›„ javac -h ë¥¼ í†µí•´ì„œ í—¤ë”íŒŒì¼ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```cpp
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class JNI */

#ifndef _Included_JNI
#define _Included_JNI
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     JNI
 * Method:    getNumber
 * Signature: ()I
 */
JNIEXPORT jint JNICALL Java_JNI_getNumber
  (JNIEnv *, jobject);

/*
 * Class:     JNI
 * Method:    printHelloWorld
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_JNI_printHelloWorld
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif

```

javah ë¥¼ ì´ìš©í•˜ì—¬ ë§Œë“  í—¤ë” íŒŒì¼

### Cì½”ë“œ ì‘ì„± ë° ë¹Œë“œ-> .dll íŒŒì¼ì„ ìƒì„±

```cpp
#include <stdio.h>
#include <jni.h>
#include "JNI.h"

JNIEXPORT jint JNICALL Java_JNI_getNumber (JNIEnv *, jobject){
      return 3;
  }

JNIEXPORT void JNICALL Java_JNI_printHelloWorld (JNIEnv *, jobject){
    printf("Helloworld");
}
```

ì½”ë“œë¥¼ ì‘ì„±ì„ í•˜ê³  64ë¹„íŠ¸ë¡œ ë¹Œë“œ í™˜ê²½ì„ êµ¬ì„±ì„ í•˜ì—¬ ë¹Œë“œ
.dll íŒŒì¼ì„ ë§Œë“ ë‹¤.

### java ì‹¤í–‰ ëª¨ìŠµ

ì½˜ì†”ì—ì„œ ìë°”ê°€ ì‹¤í–‰ë˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤
![ê²°ê³¼](/docs/assests/jnianswer.png)


#### ğŸ§¶ ëª¨ë“  ë¬¸ì„œëŠ” ìˆ˜ì •ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.